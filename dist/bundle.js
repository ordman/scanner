var MdlpScanner=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t,r){var n,o;n=[r,t,r(1),r(3)],void 0===(o=function(e,t,r,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.start="start",e.error="error",e.success="success"}(o=t.ScannerEvent||(t.ScannerEvent={})),function(e){e.mdlp="mdlp"}(t.ScannerMode||(t.ScannerMode={}));var i=function(){function e(e,t){this.domNode=e,this.dirty=!1,this.buffer=[],this.parser=r.ParserFactory.get(t),this.listen()}return e.prototype.on=function(e,t,r){return this.domNode.addEventListener(e,t,r),this},e.prototype.listen=function(){var e=this;this.domNode.addEventListener("keypress",(function(t){if(e.dirty||(e.domNode.dispatchEvent(new CustomEvent(o.start)),e.dirty=!0),t.code===n.Keyboard.Enter){var r=void 0;try{r=e.parser.handle(e.buffer)}catch(t){e.domNode.dispatchEvent(new CustomEvent(o.error,{detail:t})),e.clear()}r&&(e.domNode.dispatchEvent(new CustomEvent(o.success,{detail:r})),e.clear())}else e.buffer.push(t.key)}))},e.prototype.clear=function(){this.dirty=!1,this.buffer=[],this.domNode.value=""},e}();t.Scanner=i}.apply(t,n))||(e.exports=o)},function(e,t,r){var n,o;n=[r,t,r(2),r(0),r(4)],void 0===(o=function(e,t,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.get=function(e){switch(e){case n.ScannerMode.mdlp:return new r.MdlpParser;default:return new o.SimpleParser}},e}();t.ParserFactory=i}.apply(t,n))||(e.exports=o)},function(e,t,r){var n;void 0===(n=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n,o=function(){function e(){this.kiz=new i}return e.prototype.handle=function(e){return this.kiz.getKiz(e.join(""))},e}();t.MdlpParser=o,function(e){e[e.NO=0]="NO",e[e.SGTIN=1]="SGTIN",e[e.SSCC=2]="SSCC"}(r=t.KizType||(t.KizType={})),function(e){e.GTIN="01",e.SERIAL="21",e.SSCC="00",e.TNVED_PART1="24",e.TNVED_PART2="0",e.BATCH="10",e.EXP_DATE="17",e.CHECK_KEY="91",e.CRYPT_CODE="92"}(n=t.TokenId||(t.TokenId={}));var i=function(){function e(){}return e.getTokenId=function(e){return e.charAt(0)+e.charAt(1)},e.makeSscc=function(e){var t=e.substring(2);return{type:r.SSCC,sscc:t}},e.createBinaryInBase64=function(t){var r=t.split(e.SEPARATOR).join(String.fromCharCode(29));return btoa(r)},e.prototype.makeSgtin=function(t){var r=t.split(e.SEPARATOR),o=this.seperateOneTokenFromOther(r,n.GTIN,16),i=this.seperateOneTokenFromOther(o,n.SERIAL,15),a=this.seperateOneTokenFromOther(i,n.EXP_DATE,8),u=this.seperateOneTokenFromOther(a,n.CHECK_KEY,6),c=this.seperateOneTokenFromOther(u,n.CRYPT_CODE,46),s=this.fillSgtin(c);return s.raw_data=e.createBinaryInBase64(t),s},e.prototype.fillSgtin=function(t){var o={type:r.SGTIN,gtin:"",serial:"",tnvd:"",batch:"",exp_date:"",raw_data:""};return t.forEach((function(t){switch(e.getTokenId(t)){case n.BATCH:o.batch=t.substring(2);break;case n.EXP_DATE:o.exp_date=t.substring(2);break;case n.TNVED_PART1:t.charAt(2)===n.TNVED_PART2&&(o.tnvd=t.substring(3));break;case n.SERIAL:o.serial=t.substring(2);break;case n.GTIN:o.gtin=t.substring(2)}})),o},e.prototype.seperateOneTokenFromOther=function(t,r,n){return t.forEach((function(o,i){e.getTokenId(o)===r&&o.length>n&&(t.splice(i,1),t.push(o.substring(0,n)),t.push(o.substring(n)))})),t},e.prototype.getKiz=function(t){var r=t.trim(),o=e.getTokenId(r);switch(o){case n.GTIN:return this.makeSgtin(r);case n.SSCC:return e.makeSscc(r);default:throw new Error('Unknown token type for prefix "'+o+'"')}},e.SEPARATOR="]",e}();t.KizService=i}.apply(t,[r,t]))||(e.exports=n)},function(e,t,r){var n;void 0===(n=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BracketRight="]"}(t.KeyboardChar||(t.KeyboardChar={})),function(e){e.Enter="Enter",e.BracketRight="BracketRight"}(t.Keyboard||(t.Keyboard={}))}.apply(t,[r,t]))||(e.exports=n)},function(e,t,r){var n;void 0===(n=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.handle=function(e){return e.join("")},e}();t.SimpleParser=r}.apply(t,[r,t]))||(e.exports=n)},function(e,t,r){var n,o;n=[r,t,r(1),r(6),r(0),r(4),r(2),r(3)],void 0===(o=function(e,t,r,n,o,i,a,u){"use strict";function c(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),c(r),c(n),c(o),c(i),c(a),c(u)}.apply(t,n))||(e.exports=o)},function(e,t,r){var n,o,i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});n=[r,t,r(0)],void 0===(o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(t){return e.call(this,t,r.ScannerMode.mdlp)||this}return a(t,e),t}(r.Scanner);t.MdlpScanner=n}.apply(t,n))||(e.exports=o)}]);